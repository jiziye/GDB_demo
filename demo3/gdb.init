set logging on gdb.log 

b square if i == 5

commands 
    bt full
    i locals
    p total 
    print "hit break when i==5"
end 
